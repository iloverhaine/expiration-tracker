<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expiration Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">

  <!-- Excel Export -->
  <script src="xlsx.full.min.js"></script>

  <!-- Barcode Scanner -->
  <script src="https://unpkg.com/@ericblade/quagga2/dist/quagga.js"></script>
</head>
<body>

<header class="top-header">
  <h1>Expiration Tracker</h1>
  <p>Scan Â· Track Â· Manage Inventory</p>
</header>

<main class="container">

  <!-- DASHBOARD -->
  <section class="dashboard">
    <div class="stat expired">Expired<br><span id="expiredCount">0</span></div>
    <div class="stat soon">Expiring Soon<br><span id="soonCount">0</span></div>
    <div class="stat return">To Be Returned<br><span id="returnCount">0</span></div>
  </section>

  <!-- SCAN -->
  <section class="card">
    <button class="btn scan" onclick="startScanner()">ðŸ“· Scan Barcode</button>
    <div id="scanner"></div>
  </section>

  <!-- SEARCH -->
  <section class="card">
    <label>Search by Barcode</label>
    <div class="row">
      <input id="searchBarcode" inputmode="numeric" maxlength="12" placeholder="Enter 12-digit barcode">
      <button class="btn primary" onclick="searchByBarcode()">Search</button>
    </div>
  </section>

  <!-- ADD / UPDATE -->
  <section class="card">
    <h2>Add / Update Item</h2>

    <label>Item Name *</label>
    <input id="name" required>

    <label>Barcode *</label>
    <input id="barcode" inputmode="numeric" maxlength="12" required>

    <label>Description</label>
    <input id="description">

    <div class="row">
      <div>
        <label>Expiration Date *</label>
        <input id="expiry" type="date" required>
      </div>
      <div>
        <label>Quantity *</label>
        <input id="quantity" type="number" min="1" required>
      </div>
    </div>

    <button class="btn primary full" onclick="saveItem()">ðŸ’¾ Save Item</button>
  </section>

  <!-- INVENTORY -->
  <section class="card">
    <div class="row space">
      <h2>Inventory</h2>
      <button class="btn primary" onclick="exportExcel()">â¬‡ Export Excel</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Barcode</th>
          <th>Expiry</th>
          <th>Qty</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="inventoryTable"></tbody>
    </table>
  </section>

</main>

<script src="db.js"></script>
<script src="app.js"></script>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>

</body>
</html>